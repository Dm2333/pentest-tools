#!/bin/bash

f_payload=$1
f_url=$2
rand1=$(cat /dev/urandom | tr -dc 'a-zA-Z0-9' | fold -w 12 | head -n 1)
rand2=$(cat /dev/urandom | tr -dc 'a-zA-Z0-9' | fold -w 12 | head -n 1)
tmpfile="/tmp/$rand1"
echo $tmpfile
subdomain=$rand2
echo $subdomain

cp $f_payload $tmpfile
sed -i "s/__RANDOM_STR__/$subdomain/g" $tmpfile
cat $tmpfile
testxss --no-color --threads 5 --payload $tmpfile --prefix --suffix --single "$f_url" --inject G --encode
 
rm $tmpfile
